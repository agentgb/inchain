package org.inchain.network;

import org.inchain.Configure;
import org.inchain.crypto.Sha256Hash;
import org.inchain.message.DefaultMessageSerializer;
import org.inchain.message.MessageSerializer;
import org.inchain.store.BlockStore;
import org.inchain.utils.Hex;
import org.inchain.utils.Utils;

import java.net.InetSocketAddress;

/**
 * 主网各参数
 * @author ln
 *
 */
public class MainNetworkParams extends NetworkParams {

	private static MainNetworkParams instance;
	public static synchronized MainNetworkParams get() {
		if (instance == null) {
			instance = new MainNetworkParams();
		}
		return instance;
	}

	public MainNetworkParams() {

		this.seedManager = new RemoteSeedManager();

		seedManager.add(new Seed(new InetSocketAddress("120.77.241.8", Configure.DEFAULT_PORT)));
		seedManager.add(new Seed(new InetSocketAddress("39.108.121.242", Configure.DEFAULT_PORT)));
		seedManager.add(new Seed(new InetSocketAddress("101.132.33.140", Configure.DEFAULT_PORT)));
		seedManager.add(new Seed(new InetSocketAddress("116.62.135.185", Configure.DEFAULT_PORT)));
		seedManager.add(new Seed(new InetSocketAddress("116.62.117.200", Configure.DEFAULT_PORT)));

		init();
	}

	public MainNetworkParams(SeedManager seedManager, int port) {
		this.seedManager = seedManager;
		this.port = port;

		init();
	}

	private void init() {
		this.packetMagic = 86066998l;
		this.acceptableAddressCodes = new int[] {getSystemAccountVersion(), getCertAccountVersion()};
	}

	@Override
	public int getProtocolVersionNum(ProtocolVersion version) {
		return version.getVersion();
	}

	@Override
	public MessageSerializer getSerializer(boolean parseRetain) {
		return new DefaultMessageSerializer(this);
	}

	@Override
	public BlockStore getGengsisBlock() {
//if(1==1)return null;
		BlockStore gengsisBlock = new BlockStore(this, Hex.decode("0000000000000000000000000000000000000000000000000000000000000000000000006f93053f1629964e90d843e1593d00c0252734094954aa7400369129783c8542a1909d59000000000000a1909d59822103c88c3fd9ad654a3cb89bdc62b1811e0570d36ef229a8e2f3df6e25a03a02e09376a91429af9e39008fa61b5dbaeb7151f05bae0e99fbd98846304402201bf0a6613d0d81fb6ef9839cb0bd080a4ae21eb31883a29cec8832cee7093f860220246573474377d31092062458b41374b21ba7a30898a0406c3c2795a82588f1cbac180101000000010012117468697320612067656e6773697320747800000000010080faca73f91f00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388aca1909d590000000000020100000001014eb218fc14896d4c0bb93b2b8d1881fd186ae643ad2b0b64e1aa1129f3bce392000000006b483045022100c9618afd858a6d76cf55a53ed3cf6bb8db037631c24861856324780aa3306d2b02206f9e68630e44e40e30f4d0d84b32621c07dec99a84f790e6bc7a52d8e7a68e22012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020080c6a47e8d0300005f615d1976a91462bb8758c20c681c289f446f3600867d6de368df88ac00003426f56b1c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388aca1909d5900000000000601000000a1909d59832103c88c3fd9ad654a3cb89bdc62b1811e0570d36ef229a8e2f3df6e25a03a02e09376a91429af9e39008fa61b5dbaeb7151f05bae0e99fbd988473045022100a351686881a191ec8f55907c242a77b25f5766ad626363ecb5469d0ed6745252022012bf34af6c75fcc8c95b6eb2a730bdb4965ed6b441b446a20aa06a4cb221fda0ac29af9e39008fa61b5dbaeb7151f05bae0e99fbd9010000000000000000000000000000000000000000000000000000000000000000000000000000000000020100000001015d8259f1976fabac29f37f5ccc5b45359eea286e6b500deca01a48d95dd7fb8f010000006a47304402201a5f31ef9c10af2c83bc497a319bdcd770fe86560f47e3f86d3de34cecf3682402200fcb758023690f3b1f5585c4dbc05e715f32ded99adc96ee65c66852bd25758a012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a91429af9e39008fa61b5dbaeb7151f05bae0e99fbd988ac00f08e510c6b1c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388aca1909d59000000000003010000000000a1909d590000000000832103c88c3fd9ad654a3cb89bdc62b1811e0570d36ef229a8e2f3df6e25a03a02e09376a91429af9e39008fa61b5dbaeb7151f05bae0e99fbd9884730450221008c1119154e58c1ce3a24999eb38f446291e7647f03c318c702c4170d01f3fb8c02202f4fc08fc89d861e96adf1ad46a51301a60fc50e56afb635c33c1886813cd586ac87f67c0f29af9e39008fa61b5dbaeb7151f05bae0e99fbd90601000000a1909d598321026be5bb5402d73e1d12fe750063ac8b1568774d3aa1f2465f386e5b63706773ca76a914467f3335249aeb74f3d219b4fb9d5da27287707f88473045022100dcaad7d8c861fcb21f5ee08e073fb53dd7fe53c046b5e71e628ef27687a73796022058db3d3dd0158ed0873e3d93a466d02cb465a3161843aa7c65170072c36d6073ac467f3335249aeb74f3d219b4fb9d5da27287707f01000000000000000000000000000000000000000000000000000000000000000000000000000000000002010000000101e068570956e094ba5b72ed57ecb465b17f7a8635b59109721fd4da016774ddb8010000006b483045022100b0f0be5f1530b9104c73fcc3d1a704d574b6b32b28440878d6b39cf379dd267a02200e50606ff353049550939ed02933f691e05905e30bad63831a6758e9de598644012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a914467f3335249aeb74f3d219b4fb9d5da27287707f88ac00e0e97c236a1c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388aca1909d59000000000003010000000000a1909d5900000000008221026be5bb5402d73e1d12fe750063ac8b1568774d3aa1f2465f386e5b63706773ca76a914467f3335249aeb74f3d219b4fb9d5da27287707f88463044022011e240028aa3bfde82eecf0066242283a53dd9910fe75f5f80115cba417dd65702201f4f388977067511ca5b0f0599e3b7b81b922f032815859e583bbf1ec7fd489cac96f67c0f467f3335249aeb74f3d219b4fb9d5da27287707f0601000000a1909d5982210279a619a08b08bd823eabb0fe28e543550019e502932ca4fb41ae7da0cbd7cbcb76a91490c8a3ec255015e1e1a5ef33cf289e8d4d47d77388463044022016eb2de6a82f43af8fc0a7bf07d0f2704a72968ae429efef6881b1444d66027002201156e0e89e5e33daa75e4b4305db6347ca55436a411f5df31d567f18415184f3ac90c8a3ec255015e1e1a5ef33cf289e8d4d47d77301000000000000000000000000000000000000000000000000000000000000000000000000000000000002010000000101d141dee78cbb8859bc17a9e08681bd4e1f693d0698b516d47135f0fccd4a57d9010000006b48304502210091caf6d71a8bf3c50baed341e7246e36537fc260a7f047b445fb9f347a32f581022046fa3dd2cad26263b5fd40133e01dd18a694d4633d4f58239516da006ef566d9012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a91490c8a3ec255015e1e1a5ef33cf289e8d4d47d77388ac00d044a83a691c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388aca1909d59000000000003010000000000a1909d59000000000083210279a619a08b08bd823eabb0fe28e543550019e502932ca4fb41ae7da0cbd7cbcb76a91490c8a3ec255015e1e1a5ef33cf289e8d4d47d77388473045022100e069f4a18fa65b440f2bf30b0652f92194013bad88310484dce5869436263b52022063d4b805daeb163e9420d5954af2a738c16e997d5ecbeef0eee24cf7fa9ba060ac96f67c0f90c8a3ec255015e1e1a5ef33cf289e8d4d47d7730601000000a1909d59832102fc25beaaf30e9f4384474009d4351e75eda3f693b9e59ba5c5de4f16da1233c676a914a7459c79f4dceb5e5105da1134775e2a026e7c2a88473045022100d85af565c881c680a66e8c9d5b19334122f7a6db69d7f70a5c8e0867adeda99f02207c0081d7443eeedb6dc1b4dd21d1c0a36c630c051c56f1d704b6139dcb8e8804aca7459c79f4dceb5e5105da1134775e2a026e7c2a01000000000000000000000000000000000000000000000000000000000000000000000000000000000002010000000101ba62c5cbe9d4bb2c2940702a0698536d7186d010d1a6277e3efa8e3a5e3bf9e0010000006a4730440220341c884638ca83d334fa7cf533a87b21df5d1555ce69629482cefab857212e8002205bca343d22b04c7124434b47834373eacc98508d0739e18663795df3252911c9012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a914a7459c79f4dceb5e5105da1134775e2a026e7c2a88ac00c09fd351681c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388aca1909d59000000000003010000000000a1909d590000000000832102fc25beaaf30e9f4384474009d4351e75eda3f693b9e59ba5c5de4f16da1233c676a914a7459c79f4dceb5e5105da1134775e2a026e7c2a8847304502210089ab4727a85e376efccbb88bd76b4719566b7bd0080124df202e72ad9ce513b902206217ff4601636ccb214b92c2bc3d95b59e73dd64401cab2c422ac547a53036cdac96f67c0fa7459c79f4dceb5e5105da1134775e2a026e7c2a0601000000a1909d59832103d28e6d213b629ea2a5f46da477c09bdc6f1dccf6fe541f820e907b24493438d276a914a4f7baf52a750f56572e092822959efa83e4763b88473045022100bfd1bec1ea23259740c435cc26d5425b8d92258b022d08daf215c71c5cae068302204ebabd9720bfefe82371f9d4b07819b0c06bcbbba78f5515bb0ed1f0f4d5a82caca4f7baf52a750f56572e092822959efa83e4763b0100000000000000000000000000000000000000000000000000000000000000000000000000000000000201000000010186f21c98ad7bd75ae581cdc1f67cc02f25b06d53f94ce8411fb894bbf94df474010000006a47304402204deab18eca428677e8562f8685bf520698c2a727a305692a9020a3196db53ec40220144b1bc23e9a1b44a1778de00090e2846cfd21e74f6a7313ea3181dbee577d7f012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a914a4f7baf52a750f56572e092822959efa83e4763b88ac00b0fafe68671c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388aca1909d59000000000003010000000000a1909d590000000000832103d28e6d213b629ea2a5f46da477c09bdc6f1dccf6fe541f820e907b24493438d276a914a4f7baf52a750f56572e092822959efa83e4763b88473045022100a8ffad53d9326ecd9d0b1b7f72b314bd93aa079675e84b61b692c649730f819f02202bcc156ca770f9126e478ef283eb7e27ce3e55c6700efa94024fdb6e3bfe3aaaaca6f67c0fa4f7baf52a750f56572e092822959efa83e4763b0601000000a1909d598221033e48a377c7830442daceb6fc686b458e2c8b14384989ab657d800e9dd078d42276a91438c6f139891719b79274a759419a3bb5fdd31bef884630440220277786f5c0b8c865822df824ee60c78a450f9075d96250282233e03f770edd0b02202d86cb962c1d281e99c9cf1329b5ca46148cdcb8d2ea3382cb6edda166d42a2eac38c6f139891719b79274a759419a3bb5fdd31bef0100000000000000000000000000000000000000000000000000000000000000000000000000000000000201000000010170c502a1e326325ae84b5b2c16c7e2ff83dfab9fc6d52349b2b448aa62e8948d010000006b483045022100abc434d7bf60ebffce7b4569c875251c5ff8511cc11aab1f4f73e8507272705702207482babf7463b31036d8aadaba95b47a2865b9519775c263302e3d9bc2226372012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a91438c6f139891719b79274a759419a3bb5fdd31bef88ac00a0552a80661c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388aca1909d59000000000003010000000000a1909d5900000000008321033e48a377c7830442daceb6fc686b458e2c8b14384989ab657d800e9dd078d42276a91438c6f139891719b79274a759419a3bb5fdd31bef88473045022100cd6e9d3b033b6b628ddca6e8c69dc0beccdb4beb9018fa71287b196ade897e2402203f2ecd6abb31b3197479bc36ead611e23a2941e444536570c9460af9a62887eaaca6f67c0f38c6f139891719b79274a759419a3bb5fdd31bef0601000000a1909d59822102b4d5ad9bdbf6e75a2d840db09f7158eda4cbd9335a91400fb43ab2b6d67bfdf676a9147696561ec5a4224093cb05aed428a4d182ef169f88463044022018b537f2fdc7f701e2e0cc5abc9a721ab9e634f0efceee8736105cd62082aa1802200937bbb74413e215beed931f63ef5cdd5ed09376c30b18e12dd82fc0d722d24dac7696561ec5a4224093cb05aed428a4d182ef169f010000000000000000000000000000000000000000000000000000000000000000000000000000000000020100000001012f3f68cddb678675f93b3e6b88ad0ca59f6fffd43cc2cede6d86b4563aaf78c4010000006b483045022100a332f15c67d2d1ed9f9c19bbbc553b531a17495e54de892b2d0713388e70ebec022028595938b8e606fab424d3bb7e7d668603a72cfd154a15b7759606f64826e8eb012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a9147696561ec5a4224093cb05aed428a4d182ef169f88ac0090b05597651c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388aca1909d59000000000003010000000000a1909d590000000000832102b4d5ad9bdbf6e75a2d840db09f7158eda4cbd9335a91400fb43ab2b6d67bfdf676a9147696561ec5a4224093cb05aed428a4d182ef169f88473045022100bfaa5e8eb69a5e9d435aa79cb6451223ecc46e424c9ed3d3113157485cdcfd1a0220446fa8cc2e4a00e65d5df4aac8dcdccf3a41242a23f4127c8496465ee9e11672acb6f67c0f7696561ec5a4224093cb05aed428a4d182ef169f0b01000000bb8f9d5982c2203945787dcada33509225e385e0e6ecfd305dba6573928f8817577ba088dd341cc31484d8d00d588b1a2c5f09ef86d85ac792d5df5fea88473045022100c3be53cfe6c32b588ff7e4273bfc936d9825423b73e1bb0708fac4182c4eebf2022071608120b01c9d1f56b1a0b7fadb8519f71c1f0731237bbacce16b57e306c8e9ac84d8d00d588b1a2c5f09ef86d85ac792d5df5fea84d8d00d588b1a2c5f09ef86d85ac792d5df5fea01fd44011c046e616d6506e5908de7a7b00fe58db0e993bee59fbae98791e4bc9a44046c6f676f06e59bbee7898737687474703a2f2f66696c652e696e636861696e2e6f72672f696d616765732f696e636861696e5f6c6f676f5f313030783130302e706e6727077765627369746506e5ae98e7bd911768747470733a2f2f7777772e696e636861696e2e6f7267b908646573637269707406e68f8fe8bfb0a8e58db0e993bee698afe794b1e58db0e993bee59fbae98791e4bc9ae4b8bbe5afbce5bc80e58f91e79a84e4b880e4b8aae5ae9ae4bd8de4ba8ee58cbae59d97e993bee59586e4b89ae5ba94e794a8e5ba95e5b182e5b9b3e58fb0e79a84e585ace69c89e993bee9a1b9e79baeefbc8ce698afe7acace4b880e4b8aae4b893e4b89ae79a84e59586e794a8e58cbae59d97e993bee5ba94e794a8e7949fe68081e5b9b3e58fb0efbc810221039cdf939ac0ab76a113b69d669c04a19112ffca1bb13c940373b65b6031e078c121035319bf08fd1ebf1d4ece6645c54f2b2a029014efe33712cd207c6cc8de990551012103e3f95587d4b40574d286cf8894622b93394f30228153de5473d53ed6da723b8e00"));
		Sha256Hash merkleHash = gengsisBlock.getBlock().buildMerkleHash();

		if(log.isDebugEnabled()) {
			log.debug("the gengsis block merkle hash is : {}", merkleHash);
		}
		Utils.checkState("6f93053f1629964e90d843e1593d00c0252734094954aa7400369129783c8542".equals(Hex.encode(merkleHash.getBytes())), "the gengsis block merkle hash is error");

		if(log.isDebugEnabled()) {
			log.debug("the gengsis block hash key is : {}", gengsisBlock.getBlock().getHash());
		}
		Utils.checkState("4243c08b226bcc212be03932692ec7fc02ee5903cdc18ffcd2cfbed3fd6a4315".equals(Hex.encode(gengsisBlock.getBlock().getHash().getBytes())), "the gengsis block hash is error");

		return gengsisBlock;
	}

	/**
	 * 获取该网络的认证管理账号的hash160
	 * @return byte[]
	 */
	@Override
	public byte[] getCertAccountManagerHash160() {
		return null;
	}

	@Override
	public byte[] getCommunityManagerHash160() {
		return null;
	}
	/**
	 * 主网，普通地址以i开头
	 */
	@Override
	public int getSystemAccountVersion() {
		return 102;
	}

	/**
	 * 主网，认证地址以V开头
	 */
	@Override
	public int getCertAccountVersion() {
		return 70;
	}



}
