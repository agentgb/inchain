package org.inchain.network;

import org.inchain.crypto.Sha256Hash;
import org.inchain.message.DefaultMessageSerializer;
import org.inchain.message.MessageSerializer;
import org.inchain.store.BlockStore;
import org.inchain.utils.Hex;
import org.inchain.utils.Utils;

/**
 * 主网各参数
 * @author ln
 *
 */
public class MainNetworkParams extends NetworkParams {
	
	private static MainNetworkParams instance;
    public static synchronized MainNetworkParams get() {
        if (instance == null) {
            instance = new MainNetworkParams();
        }
        return instance;
    }
    
    public MainNetworkParams() {

    	this.seedManager = new RemoteSeedManager();
    	
    	seedManager.addDnsSeed("seed1.inchain.org");
    	seedManager.addDnsSeed("seed2.inchain.org");
    	
    	init();
	}

	public MainNetworkParams(SeedManager seedManager, int port) {
    	this.seedManager = seedManager;
    	this.port = port;
    	
    	init();
	}

	private void init() {
    	this.packetMagic = 86568998l;
    	this.acceptableAddressCodes = new int[] {getSystemAccountVersion(), getCertAccountVersion()};
	}
    
	@Override
	public int getProtocolVersionNum(ProtocolVersion version) {
		return version.getVersion();
	}

	@Override
	public MessageSerializer getSerializer(boolean parseRetain) {
		return new DefaultMessageSerializer(this);
	}

	@Override
	public BlockStore getGengsisBlock() {
		BlockStore gengsisBlock = new BlockStore(this, Hex.decode("000000000000000000000000000000000000000000000000000000000000000000000000b40bb592d5dd3d71643db5cb97afb6db07feaca7fd58407384d35512a541000022ee9b5900000000000022ee9b59832103c88c3fd9ad654a3cb89bdc62b1811e0570d36ef229a8e2f3df6e25a03a02e09376a91429af9e39008fa61b5dbaeb7151f05bae0e99fbd98847304502210084e68066f545b6b6f3cecad0aedca59fe0bb6265264424ba60e5db1485a65d99022079429724dec6dbb9b2c54a53a8cd170bb7c6f6902694f71bdc10c3c1f70b55daac180101000000010012117468697320612067656e6773697320747800000000010080faca73f91f00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388ac22ee9b59000000000002010000000101527eb9b0f857183207f1a84f6735456d3e8accf139b12d4c8fe56039a239d1bb000000006a47304402206670476d9c82c907ac17e7cbf0279d947500fceee3b9d9d9814f39b867852bda022078ea99cebc17416deac6061fa3fd452ec6ec84fdfd72e78cab6cf33798287cf9012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020080c6a47e8d0300005f615d1976a91462bb8758c20c681c289f446f3600867d6de368df88ac00003426f56b1c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388ac22ee9b590000000000060100000022ee9b59832103c88c3fd9ad654a3cb89bdc62b1811e0570d36ef229a8e2f3df6e25a03a02e09376a91429af9e39008fa61b5dbaeb7151f05bae0e99fbd988473045022100e0d51e2c7a459b227890d8282764314a2844d05a756b747808d2d982be05751102205146b4fa5e624ebabf309387858e611803e98733205d76cb69463727d807548eac29af9e39008fa61b5dbaeb7151f05bae0e99fbd90100000000000000000000000000000000000000000000000000000000000000000000000000000000000201000000010149f2c9ff1c43851edffe97f79d3d1db3632a9bb35efea939a36cef522dba090f010000006b483045022100a20a4c6509f62952ea3fe10f41a947943b3c63065618c17a0af8337164792d7b022078c5b5632a4e44e4dfb69d88cc0b6750ad2eb411de05900c36dd718632326215012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a91429af9e39008fa61b5dbaeb7151f05bae0e99fbd988ac00f08e510c6b1c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388ac22ee9b5900000000000301000000000022ee9b590000000000822103c88c3fd9ad654a3cb89bdc62b1811e0570d36ef229a8e2f3df6e25a03a02e09376a91429af9e39008fa61b5dbaeb7151f05bae0e99fbd988463044022020e26a6a5e2fc10a514132aab9ec6f3bfd0f4c0469cc1ef6d494ec37a9a269240220173e7ffffabf9039f2ba1d9b9bb8846c2c45e6426cceec9e0e4e278673b1d291ac9e3e1a0929af9e39008fa61b5dbaeb7151f05bae0e99fbd9060100000022ee9b598321026be5bb5402d73e1d12fe750063ac8b1568774d3aa1f2465f386e5b63706773ca76a914467f3335249aeb74f3d219b4fb9d5da27287707f88473045022100c9ffded9213e685cd34b6589890ce3accae404bcb762862744b29987a0d55ae9022065b8f71368553a5bed527d4ce5fa040f8ee139b8f604a6390c2d03d559002253ac467f3335249aeb74f3d219b4fb9d5da27287707f01000000000000000000000000000000000000000000000000000000000000000000000000000000000002010000000101666ea43b903bc4c3ea93ab621a95bbd4dd161b4095ed964dde1f70589d33b6ff010000006a4730440220746d591e229e3fc2173d27e95f005233773629685e0ab2f6d9ba7c30edf32e3c02201f3f7f6c16498a7b0412dec37ee0121685ded6275b3ea966b85f59174531e0e6012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a914467f3335249aeb74f3d219b4fb9d5da27287707f88ac00e0e97c236a1c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388ac22ee9b5900000000000301000000000022ee9b5900000000008321026be5bb5402d73e1d12fe750063ac8b1568774d3aa1f2465f386e5b63706773ca76a914467f3335249aeb74f3d219b4fb9d5da27287707f88473045022100b19730343ec08900d93f78b5de7d820e48467b72f1426139494a5199f6adbb1b0220405c92c867994ca059aba1c291e579ef0685f636c9feb3a82f994f2b663bc619aca63e1a09467f3335249aeb74f3d219b4fb9d5da27287707f060100000022ee9b5982210279a619a08b08bd823eabb0fe28e543550019e502932ca4fb41ae7da0cbd7cbcb76a91490c8a3ec255015e1e1a5ef33cf289e8d4d47d77388463044022018232bda87bf154f2a6f4717a06d9fafb522decf6401055755aa759d60c7ffea02201c2023fd3ca11c202868f1395c1205c1d38a3670a61bc3e4d284f7fde3aa6c37ac90c8a3ec255015e1e1a5ef33cf289e8d4d47d7730100000000000000000000000000000000000000000000000000000000000000000000000000000000000201000000010198b0aa56e88c44514dbc7197659d44685e2034e2d983ffb329e1d5e549e9aa0b010000006b4830450221008d637ec4a59a8d638dca307f79821adb57d48d5e91fca78358a4d8557feee94c02201faf2c1545284d48f3c93d9f8e05dfa74fee7e2147f97ac5d2dd8e4bbcbb906c012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a91490c8a3ec255015e1e1a5ef33cf289e8d4d47d77388ac00d044a83a691c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388ac22ee9b5900000000000301000000000022ee9b59000000000083210279a619a08b08bd823eabb0fe28e543550019e502932ca4fb41ae7da0cbd7cbcb76a91490c8a3ec255015e1e1a5ef33cf289e8d4d47d77388473045022100d11edfffb085e3712aa9196709458509dd0b2c2d2d163651f0055ce45da45c3802204cbdb54489d3e310830e2f23e5af0e19ec6f9cd24efe0db0cac2b1973f07d0fbacad3e1a0990c8a3ec255015e1e1a5ef33cf289e8d4d47d773060100000022ee9b59822102fc25beaaf30e9f4384474009d4351e75eda3f693b9e59ba5c5de4f16da1233c676a914a7459c79f4dceb5e5105da1134775e2a026e7c2a8846304402205e0cb42d3219e704fff550fcde33a6d4e710a66709d9b4d663ec21bdc0bf6040022033fb0daf3ae00ea6e393ef9723248e7f872799ea4244e86d04766d6edd5b67b1aca7459c79f4dceb5e5105da1134775e2a026e7c2a0100000000000000000000000000000000000000000000000000000000000000000000000000000000000201000000010197a3f66b89b58e6644776346c8d7399a41851c2cc9cbc758ad5d84e6a2fe03da010000006b483045022100dbc4f36ea2feac8605c55724a2467a2ba567a8375341fa6234d69d158884a72502200880ff95917490c070acb010db011ae17a0eb38248a610b25ae3f02632911034012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a914a7459c79f4dceb5e5105da1134775e2a026e7c2a88ac00c09fd351681c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388ac22ee9b5900000000000301000000000022ee9b590000000000832102fc25beaaf30e9f4384474009d4351e75eda3f693b9e59ba5c5de4f16da1233c676a914a7459c79f4dceb5e5105da1134775e2a026e7c2a88473045022100a312803572042909ec2f99c2642e59281c62b01bfc6e5f89e09489b0106c36ba02207281cfdc74a1508eb7083acc2ca4001278bcb626a4bba508e3b837cae0c146cdacb23e1a09a7459c79f4dceb5e5105da1134775e2a026e7c2a060100000022ee9b59822103d28e6d213b629ea2a5f46da477c09bdc6f1dccf6fe541f820e907b24493438d276a914a4f7baf52a750f56572e092822959efa83e4763b88463044022012becad26dc32187bf536f2a7039dc8b25e45d12bfa19ec851c92f2f7431543c0220684360281994a27b89fdb31afa1c1e759f017cde389d89ebbd0e47d53df62a1caca4f7baf52a750f56572e092822959efa83e4763b0100000000000000000000000000000000000000000000000000000000000000000000000000000000000201000000010117ab2275e1045f38595fd0527d26c83ef2f7966a20c6d51bbafacddb4e3d946f010000006a4730440220116df50ac47d3c8e6f8af33ef854c485621cb81b7ebb0e4f9769594c421d6c7802201185b7e51a32209e874787f1c1d749ba87d14f1b77ee7b87b849409267fe63de012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a914a4f7baf52a750f56572e092822959efa83e4763b88ac00b0fafe68671c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388ac22ee9b5900000000000301000000000022ee9b590000000000822103d28e6d213b629ea2a5f46da477c09bdc6f1dccf6fe541f820e907b24493438d276a914a4f7baf52a750f56572e092822959efa83e4763b8846304402206505f9380c8ae738bf0a3f4fb70ebcedbec67a87b6b8422365bcbc629264729702200ab64eac6dc8d50dd949afd33da0fdb5829958b9537c1a175703174a7ba59ba1acb63e1a09a4f7baf52a750f56572e092822959efa83e4763b060100000022ee9b598221033e48a377c7830442daceb6fc686b458e2c8b14384989ab657d800e9dd078d42276a91438c6f139891719b79274a759419a3bb5fdd31bef8846304402200e3798e1a96789a1031fa1dc2b74f50dde04b2eeded0cd4438be3a36c92bde4b022068694727dc655c72059ff10466366bb226bdae6e6d7def8dee3452bbf668a0fcac38c6f139891719b79274a759419a3bb5fdd31bef01000000000000000000000000000000000000000000000000000000000000000000000000000000000002010000000101e08ea5e3d31db4ac80171d8fb4183a4deb60e0597f601ba3fa1da00cfd74a727010000006b483045022100a4e998763ad2e98fcb5ae98aa8ad493eac359a61ee5e3a7e24b73c8f8d46b55a0220378e177531af54ea1de1f2f9fc02953b9b8b1887e537a34a4acd7fa59228971f012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a91438c6f139891719b79274a759419a3bb5fdd31bef88ac00a0552a80661c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388ac22ee9b5900000000000301000000000022ee9b5900000000008321033e48a377c7830442daceb6fc686b458e2c8b14384989ab657d800e9dd078d42276a91438c6f139891719b79274a759419a3bb5fdd31bef884730450221008700ae270d23732fce3eff780e3694cfb0d863ea51ff8a31da0647d29f36a26e0220530028050828c8745cf3782251ae09933cc72e73fd630d3c11b0e095a7ea2a20acb93e1a0938c6f139891719b79274a759419a3bb5fdd31bef060100000022ee9b59832102b4d5ad9bdbf6e75a2d840db09f7158eda4cbd9335a91400fb43ab2b6d67bfdf676a9147696561ec5a4224093cb05aed428a4d182ef169f88473045022100e315acf5300829059b226c7d55f09204d08620fff9ebc52412b5776067be6bd802205f538f44243cf6de9e9891cf8d7ec2fbfeb0a500e0f79460ee20c09a86e7daa4ac7696561ec5a4224093cb05aed428a4d182ef169f01000000000000000000000000000000000000000000000000000000000000000000000000000000000002010000000101b1dde5ee4da70929126346e677a08a90013338b6ac82cda1b8ce3eb8a1b04867010000006b48304502210087377aca6e3c157ca0d2074bbbfcfed8621dcd54d496de456461652348de8b9e02203656df411c162f74256d23429e6e4aa72c4523254d8d85be5ae8dac2ea9e5c76012103b2d7fe3b88a996f89d08e0fd74eff21f381f25d45fd27b80c065e0acb509a79fffffffff020010a5d4e8000000000000001976a9147696561ec5a4224093cb05aed428a4d182ef169f88ac0090b05597651c00000000001976a91458beed5007c23824d6949b2351ac5bf378873dd388ac22ee9b5900000000000301000000000022ee9b590000000000832102b4d5ad9bdbf6e75a2d840db09f7158eda4cbd9335a91400fb43ab2b6d67bfdf676a9147696561ec5a4224093cb05aed428a4d182ef169f8847304502210092884ea5d8ca6233dd329d7d57d385662a4a556e81b44c65143c39f68397f85a022053a3543ecf95edd40727eba172b689462fbb355be5eeac61f535a6eebcbc86a3acbd3e1a097696561ec5a4224093cb05aed428a4d182ef169f0b0100000074e79b5981c22048755b0a9bee8c42bfbe595c51959758d4232a5a165ab58d6bd5194e8d92bf0ac314f59c9f55c0af1a6a311858a258da48c67cb5b6d0884630440220751b077f567a4424b0844369538118eb75b3369d876f6ba2dfa75e547c8cf3dd0220737e33e61ce1717cbb03ebc4961b78d0f04b78d210046fae6edc96f035da93b1acf59c9f55c0af1a6a311858a258da48c67cb5b6d0f59c9f55c0af1a6a311858a258da48c67cb5b6d001fd44011c046e616d6506e5908de7a7b00fe58db0e993bee59fbae98791e4bc9a44046c6f676f06e59bbee7898737687474703a2f2f66696c652e696e636861696e2e6f72672f696d616765732f696e636861696e5f6c6f676f5f313030783130302e706e6727077765627369746506e5ae98e7bd911768747470733a2f2f7777772e696e636861696e2e6f7267b908646573637269707406e68f8fe8bfb0a8e58db0e993bee698afe794b1e58db0e993bee59fbae98791e4bc9ae4b8bbe5afbce5bc80e58f91e79a84e4b880e4b8aae5ae9ae4bd8de4ba8ee58cbae59d97e993bee59586e4b89ae5ba94e794a8e5ba95e5b182e5b9b3e58fb0e79a84e585ace69c89e993bee9a1b9e79baeefbc8ce698afe7acace4b880e4b8aae4b893e4b89ae79a84e59586e794a8e58cbae59d97e993bee5ba94e794a8e7949fe68081e5b9b3e58fb0efbc810221028f5857c7e5cf202a515461d95b2b61e4117512b0dc6b8600a365fd0ca2e17a6c2102ff10066f07791010580a5ae2068e70e438ef9359eb3648a6ea9758ca5365ad9f0121021844cb86b158d4fd3a1faec6900ed033b65c9bd1c1088e47179c9b99c5e4312100"));

		Sha256Hash merkleHash = gengsisBlock.getBlock().buildMerkleHash();

		if(log.isDebugEnabled()) {
			log.debug("the gengsis block merkle hash is : {}", merkleHash);
		}
		Utils.checkState("b40bb592d5dd3d71643db5cb97afb6db07feaca7fd58407384d35512a5410000".equals(Hex.encode(merkleHash.getBytes())), "the gengsis block merkle hash is error");

		if(log.isDebugEnabled()) {
			log.debug("the gengsis block hash key is : {}", gengsisBlock.getBlock().getHash());
		}
		Utils.checkState("6fc76012cbacb4ad4526fc43e4e5b50d00e62c849b8b3bb41c0041814c1d27d3".equals(Hex.encode(gengsisBlock.getBlock().getHash().getBytes())), "the gengsis block hash is error");

		return gengsisBlock;
	}

	/**
	 * 获取该网络的认证管理账号的hash160
	 * @return byte[]
	 */
	@Override
	public byte[] getCertAccountManagerHash160() {
		return null;
	}

	@Override
	public byte[] getCommunityManagerHash160() {
		return null;
	}
	/**
	 * 主网，普通地址以i开头
	 */
	@Override
	public int getSystemAccountVersion() {
		return 102;
	}

	/**
	 * 主网，认证地址以V开头
	 */
	@Override
	public int getCertAccountVersion() {
		return 70;
	}



}
